
 api1 Pulling 
 api2 Pulling 
 0bdf2c4d1714 Already exists 
 19f81082f6f0 Pulling fs layer 
 799df5177ae2 Pulling fs layer 
 66cd357cf7a1 Pulling fs layer 
 f2a664a2c5c7 Pulling fs layer 
 581fd715a4fb Pulling fs layer 
 997fcc85c431 Pulling fs layer 
 2bc9df87a82b Pulling fs layer 
 f2a664a2c5c7 Waiting 
 581fd715a4fb Waiting 
 997fcc85c431 Waiting 
 2bc9df87a82b Waiting 
 0bdf2c4d1714 Already exists 
 19f81082f6f0 Pulling fs layer 
 799df5177ae2 Pulling fs layer 
 66cd357cf7a1 Pulling fs layer 
 f2a664a2c5c7 Pulling fs layer 
 581fd715a4fb Pulling fs layer 
 997fcc85c431 Pulling fs layer 
 2bc9df87a82b Pulling fs layer 
 2bc9df87a82b Waiting 
 581fd715a4fb Waiting 
 f2a664a2c5c7 Waiting 
 997fcc85c431 Waiting 
 799df5177ae2 Downloading [>                                                  ]  139.5kB/12.58MB
 799df5177ae2 Downloading [>                                                  ]  139.5kB/12.58MB
 66cd357cf7a1 Downloading [==================================================>]     250B/250B
 66cd357cf7a1 Verifying Checksum 
 66cd357cf7a1 Download complete 
 66cd357cf7a1 Download complete 
 19f81082f6f0 Downloading [>                                                  ]  50.67kB/3.514MB
 19f81082f6f0 Downloading [>                                                  ]  50.67kB/3.514MB
 f2a664a2c5c7 Download complete 
 f2a664a2c5c7 Downloading [==================================================>]      93B/93B
 19f81082f6f0 Verifying Checksum 
 19f81082f6f0 Download complete 
 19f81082f6f0 Verifying Checksum 
 19f81082f6f0 Download complete 
 19f81082f6f0 Extracting [>                                                  ]  65.54kB/3.514MB
 19f81082f6f0 Extracting [>                                                  ]  65.54kB/3.514MB
 799df5177ae2 Downloading [================================================>  ]  12.18MB/12.58MB
 799df5177ae2 Downloading [================================================>  ]  12.18MB/12.58MB
 799df5177ae2 Verifying Checksum 
 799df5177ae2 Download complete 
 799df5177ae2 Verifying Checksum 
 799df5177ae2 Download complete 
 581fd715a4fb Verifying Checksum 
 581fd715a4fb Download complete 
 581fd715a4fb Downloading [==================================================>]     209B/209B
 581fd715a4fb Verifying Checksum 
 581fd715a4fb Download complete 
 19f81082f6f0 Extracting [===============>                                   ]  1.114MB/3.514MB
 19f81082f6f0 Extracting [===============>                                   ]  1.114MB/3.514MB
 997fcc85c431 Downloading [>                                                  ]    185kB/17.47MB
 997fcc85c431 Downloading [>                                                  ]    185kB/17.47MB
 2bc9df87a82b Downloading [>                                                  ]  377.5kB/37.67MB
 2bc9df87a82b Downloading [>                                                  ]  377.5kB/37.67MB
 19f81082f6f0 Extracting [==================================================>]  3.514MB/3.514MB
 19f81082f6f0 Extracting [==================================================>]  3.514MB/3.514MB
 19f81082f6f0 Extracting [==================================================>]  3.514MB/3.514MB
 19f81082f6f0 Extracting [==================================================>]  3.514MB/3.514MB
 997fcc85c431 Verifying Checksum 
 997fcc85c431 Download complete 
 997fcc85c431 Verifying Checksum 
 997fcc85c431 Download complete 
 19f81082f6f0 Pull complete 
 19f81082f6f0 Pull complete 
 799df5177ae2 Extracting [>                                                  ]  131.1kB/12.58MB
 799df5177ae2 Extracting [>                                                  ]  131.1kB/12.58MB
 2bc9df87a82b Downloading [=======================>                           ]     18MB/37.67MB
 2bc9df87a82b Downloading [=======================>                           ]     18MB/37.67MB
 799df5177ae2 Extracting [======>                                            ]  1.704MB/12.58MB
 799df5177ae2 Extracting [======>                                            ]  1.704MB/12.58MB
 799df5177ae2 Extracting [=================>                                 ]  4.456MB/12.58MB
 799df5177ae2 Extracting [=================>                                 ]  4.456MB/12.58MB
 2bc9df87a82b Downloading [============================================>      ]  33.69MB/37.67MB
 2bc9df87a82b Downloading [============================================>      ]  33.69MB/37.67MB
 2bc9df87a82b Verifying Checksum 
 2bc9df87a82b Download complete 
 2bc9df87a82b Verifying Checksum 
 2bc9df87a82b Download complete 
 799df5177ae2 Extracting [============================>                      ]  7.078MB/12.58MB
 799df5177ae2 Extracting [============================>                      ]  7.078MB/12.58MB
 799df5177ae2 Extracting [=======================================>           ]  9.961MB/12.58MB
 799df5177ae2 Extracting [=======================================>           ]  9.961MB/12.58MB
 799df5177ae2 Extracting [============================================>      ]  11.27MB/12.58MB
 799df5177ae2 Extracting [============================================>      ]  11.27MB/12.58MB
 799df5177ae2 Extracting [==================================================>]  12.58MB/12.58MB
 799df5177ae2 Extracting [==================================================>]  12.58MB/12.58MB
 799df5177ae2 Extracting [==================================================>]  12.58MB/12.58MB
 799df5177ae2 Extracting [==================================================>]  12.58MB/12.58MB
 799df5177ae2 Pull complete 
 799df5177ae2 Pull complete 
 66cd357cf7a1 Extracting [==================================================>]     250B/250B
 66cd357cf7a1 Extracting [==================================================>]     250B/250B
 66cd357cf7a1 Extracting [==================================================>]     250B/250B
 66cd357cf7a1 Extracting [==================================================>]     250B/250B
 66cd357cf7a1 Pull complete 
 66cd357cf7a1 Pull complete 
 f2a664a2c5c7 Extracting [==================================================>]      93B/93B
 f2a664a2c5c7 Extracting [==================================================>]      93B/93B
 f2a664a2c5c7 Extracting [==================================================>]      93B/93B
 f2a664a2c5c7 Extracting [==================================================>]      93B/93B
 f2a664a2c5c7 Pull complete 
 f2a664a2c5c7 Pull complete 
 581fd715a4fb Extracting [==================================================>]     209B/209B
 581fd715a4fb Extracting [==================================================>]     209B/209B
 581fd715a4fb Extracting [==================================================>]     209B/209B
 581fd715a4fb Extracting [==================================================>]     209B/209B
 581fd715a4fb Pull complete 
 581fd715a4fb Pull complete 
 997fcc85c431 Extracting [>                                                  ]  196.6kB/17.47MB
 997fcc85c431 Extracting [>                                                  ]  196.6kB/17.47MB
 997fcc85c431 Extracting [======>                                            ]  2.359MB/17.47MB
 997fcc85c431 Extracting [======>                                            ]  2.359MB/17.47MB
 997fcc85c431 Extracting [==========>                                        ]  3.539MB/17.47MB
 997fcc85c431 Extracting [==========>                                        ]  3.539MB/17.47MB
 997fcc85c431 Extracting [==============>                                    ]  5.112MB/17.47MB
 997fcc85c431 Extracting [==============>                                    ]  5.112MB/17.47MB
 997fcc85c431 Extracting [===================>                               ]  6.685MB/17.47MB
 997fcc85c431 Extracting [===================>                               ]  6.685MB/17.47MB
 997fcc85c431 Extracting [=======================>                           ]  8.061MB/17.47MB
 997fcc85c431 Extracting [=======================>                           ]  8.061MB/17.47MB
 997fcc85c431 Extracting [===========================>                       ]  9.437MB/17.47MB
 997fcc85c431 Extracting [===========================>                       ]  9.437MB/17.47MB
 997fcc85c431 Extracting [====================================>              ]  12.58MB/17.47MB
 997fcc85c431 Extracting [====================================>              ]  12.58MB/17.47MB
 997fcc85c431 Extracting [================================================>  ]  16.91MB/17.47MB
 997fcc85c431 Extracting [================================================>  ]  16.91MB/17.47MB
 997fcc85c431 Extracting [==================================================>]  17.47MB/17.47MB
 997fcc85c431 Extracting [==================================================>]  17.47MB/17.47MB
 997fcc85c431 Pull complete 
 997fcc85c431 Pull complete 
 2bc9df87a82b Extracting [>                                                  ]  393.2kB/37.67MB
 2bc9df87a82b Extracting [>                                                  ]  393.2kB/37.67MB
 2bc9df87a82b Extracting [==>                                                ]  1.966MB/37.67MB
 2bc9df87a82b Extracting [==>                                                ]  1.966MB/37.67MB
 2bc9df87a82b Extracting [====>                                              ]  3.539MB/37.67MB
 2bc9df87a82b Extracting [====>                                              ]  3.539MB/37.67MB
 2bc9df87a82b Extracting [==========>                                        ]  7.864MB/37.67MB
 2bc9df87a82b Extracting [==========>                                        ]  7.864MB/37.67MB
 2bc9df87a82b Extracting [============>                                      ]  9.437MB/37.67MB
 2bc9df87a82b Extracting [============>                                      ]  9.437MB/37.67MB
 2bc9df87a82b Extracting [==============>                                    ]  11.01MB/37.67MB
 2bc9df87a82b Extracting [==============>                                    ]  11.01MB/37.67MB
 2bc9df87a82b Extracting [================>                                  ]  12.19MB/37.67MB
 2bc9df87a82b Extracting [================>                                  ]  12.19MB/37.67MB
 2bc9df87a82b Extracting [================>                                  ]  12.58MB/37.67MB
 2bc9df87a82b Extracting [================>                                  ]  12.58MB/37.67MB
 2bc9df87a82b Extracting [=================>                                 ]  13.37MB/37.67MB
 2bc9df87a82b Extracting [=================>                                 ]  13.37MB/37.67MB
 2bc9df87a82b Extracting [===================>                               ]  14.55MB/37.67MB
 2bc9df87a82b Extracting [===================>                               ]  14.55MB/37.67MB
 2bc9df87a82b Extracting [=====================>                             ]  16.52MB/37.67MB
 2bc9df87a82b Extracting [=====================>                             ]  16.52MB/37.67MB
 2bc9df87a82b Extracting [=======================>                           ]  17.69MB/37.67MB
 2bc9df87a82b Extracting [=======================>                           ]  17.69MB/37.67MB
 2bc9df87a82b Extracting [=========================>                         ]  18.87MB/37.67MB
 2bc9df87a82b Extracting [=========================>                         ]  18.87MB/37.67MB
 2bc9df87a82b Extracting [=============================>                     ]  22.41MB/37.67MB
 2bc9df87a82b Extracting [=============================>                     ]  22.41MB/37.67MB
 2bc9df87a82b Extracting [===============================>                   ]  23.99MB/37.67MB
 2bc9df87a82b Extracting [===============================>                   ]  23.99MB/37.67MB
 2bc9df87a82b Extracting [================================>                  ]  24.77MB/37.67MB
 2bc9df87a82b Extracting [================================>                  ]  24.77MB/37.67MB
 2bc9df87a82b Extracting [==================================>                ]  25.95MB/37.67MB
 2bc9df87a82b Extracting [==================================>                ]  25.95MB/37.67MB
 2bc9df87a82b Extracting [======================================>            ]   29.1MB/37.67MB
 2bc9df87a82b Extracting [======================================>            ]   29.1MB/37.67MB
 2bc9df87a82b Extracting [==========================================>        ]  32.24MB/37.67MB
 2bc9df87a82b Extracting [==========================================>        ]  32.24MB/37.67MB
 2bc9df87a82b Extracting [============================================>      ]  33.42MB/37.67MB
 2bc9df87a82b Extracting [============================================>      ]  33.42MB/37.67MB
 2bc9df87a82b Extracting [==================================================>]  37.67MB/37.67MB
 2bc9df87a82b Extracting [==================================================>]  37.67MB/37.67MB
 2bc9df87a82b Pull complete 
 2bc9df87a82b Pull complete 
 api2 Pulled 
 api1 Pulled 
 Network pedrohsb-python_backend  Creating
 Network pedrohsb-python_backend  Created
 Container pedrohsb-python-api1-1  Creating
 Container pedrohsb-python-api2-1  Creating
 Container pedrohsb-python-api1-1  Created
 Container pedrohsb-python-api2-1  Created
 Container nginx1  Creating
 Container nginx1  Created
Attaching to nginx1, api1-1, api2-1
nginx1  | /docker-entrypoint.sh: /docker-entrypoint.d/ is not empty, will attempt to perform configuration
nginx1  | /docker-entrypoint.sh: Looking for shell scripts in /docker-entrypoint.d/
nginx1  | /docker-entrypoint.sh: Launching /docker-entrypoint.d/10-listen-on-ipv6-by-default.sh
nginx1  | 10-listen-on-ipv6-by-default.sh: info: Getting the checksum of /etc/nginx/conf.d/default.conf
nginx1  | 10-listen-on-ipv6-by-default.sh: info: Enabled listen on IPv6 in /etc/nginx/conf.d/default.conf
nginx1  | /docker-entrypoint.sh: Sourcing /docker-entrypoint.d/15-local-resolvers.envsh
nginx1  | /docker-entrypoint.sh: Launching /docker-entrypoint.d/20-envsubst-on-templates.sh
nginx1  | /docker-entrypoint.sh: Launching /docker-entrypoint.d/30-tune-worker-processes.sh
nginx1  | /docker-entrypoint.sh: Configuration complete; ready for start up
api2-1  | INFO:     Started server process [1]
api2-1  | INFO:     Waiting for application startup.
api2-1  | INFO:     Application startup complete.
api2-1  | INFO:     Uvicorn running on http://0.0.0.0:9999 (Press CTRL+C to quit)
api1-1  | INFO:     Started server process [1]
api1-1  | INFO:     Waiting for application startup.
api1-1  | INFO:     Application startup complete.
api1-1  | INFO:     Uvicorn running on http://0.0.0.0:9999 (Press CTRL+C to quit)
[Knginx1 exited with code 0
api2-1  | INFO:     Shutting down
api1-1  | INFO:     Shutting down
api2-1  | INFO:     Waiting for application shutdown.
api2-1  | INFO:     Application shutdown complete.
api2-1  | INFO:     Finished server process [1]
api2-1  | _GatheringFuture exception was never retrieved
api2-1  | future: <_GatheringFuture finished exception=CancelledError()>
api2-1  | Traceback (most recent call last):
api2-1  |   File "/app/app/worker.py", line 53, in worker
api2-1  |     payload = await queue.get()
api2-1  |               ^^^^^^^^^^^^^^^^^
api2-1  |   File "/usr/local/lib/python3.13/asyncio/queues.py", line 186, in get
api2-1  |     await getter
api2-1  | asyncio.exceptions.CancelledError
api1-1  | INFO:     Waiting for application shutdown.
api1-1  | INFO:     Application shutdown complete.
api1-1  | INFO:     Finished server process [1]
api1-1  | _GatheringFuture exception was never retrieved
api1-1  | future: <_GatheringFuture finished exception=CancelledError()>
api1-1  | Traceback (most recent call last):
api1-1  |   File "/app/app/worker.py", line 54, in worker
api1-1  |     ok = await process_payment(
api1-1  |          ^^^^^^^^^^^^^^^^^^^^^^
api1-1  |     ...<4 lines>...
api1-1  |     )
api1-1  |     ^
api1-1  |   File "/app/app/worker.py", line 67, in process_payment
api1-1  |     processor, ok = await post_payment(payload, url, processor, requested_at)
api1-1  |                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
api1-1  |   File "/app/app/worker.py", line 39, in post_payment
api1-1  |     res = await client.post(
api1-1  |           ^^^^^^^^^^^^^^^^^^
api1-1  |     ...<2 lines>...
api1-1  |     )
api1-1  |     ^
api1-1  |   File "/usr/local/lib/python3.13/site-packages/httpx/_client.py", line 1859, in post
api1-1  |     return await self.request(
api1-1  |            ^^^^^^^^^^^^^^^^^^^
api1-1  |     ...<13 lines>...
api1-1  |     )
api1-1  |     ^
api1-1  |   File "/usr/local/lib/python3.13/site-packages/httpx/_client.py", line 1540, in request
api1-1  |     return await self.send(request, auth=auth, follow_redirects=follow_redirects)
api1-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
api1-1  |   File "/usr/local/lib/python3.13/site-packages/httpx/_client.py", line 1629, in send
api1-1  |     response = await self._send_handling_auth(
api1-1  |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
api1-1  |     ...<4 lines>...
api1-1  |     )
api1-1  |     ^
api1-1  |   File "/usr/local/lib/python3.13/site-packages/httpx/_client.py", line 1657, in _send_handling_auth
api1-1  |     response = await self._send_handling_redirects(
api1-1  |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
api1-1  |     ...<3 lines>...
api1-1  |     )
api1-1  |     ^
api1-1  |   File "/usr/local/lib/python3.13/site-packages/httpx/_client.py", line 1694, in _send_handling_redirects
api1-1  |     response = await self._send_single_request(request)
api1-1  |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
api1-1  |   File "/usr/local/lib/python3.13/site-packages/httpx/_client.py", line 1730, in _send_single_request
api1-1  |     response = await transport.handle_async_request(request)
api1-1  |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
api1-1  |   File "/usr/local/lib/python3.13/site-packages/httpx/_transports/default.py", line 394, in handle_async_request
api1-1  |     resp = await self._pool.handle_async_request(req)
api1-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
api1-1  |   File "/usr/local/lib/python3.13/site-packages/httpcore/_async/connection_pool.py", line 256, in handle_async_request
api1-1  |     raise exc from None
api1-1  |   File "/usr/local/lib/python3.13/site-packages/httpcore/_async/connection_pool.py", line 236, in handle_async_request
api1-1  |     response = await connection.handle_async_request(
api1-1  |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
api1-1  |         pool_request.request
api1-1  |         ^^^^^^^^^^^^^^^^^^^^
api1-1  |     )
api1-1  |     ^
api1-1  |   File "/usr/local/lib/python3.13/site-packages/httpcore/_async/connection.py", line 103, in handle_async_request
api1-1  |     return await self._connection.handle_async_request(request)
api1-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
api1-1  |   File "/usr/local/lib/python3.13/site-packages/httpcore/_async/http11.py", line 72, in handle_async_request
api1-1  |     async with self._state_lock:
api1-1  |                ^^^^^^^^^^^^^^^^
api1-1  |   File "/usr/local/lib/python3.13/site-packages/httpcore/_synchronization.py", line 77, in __aenter__
api1-1  |     await self._anyio_lock.acquire()
api1-1  |   File "/usr/local/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 1799, in acquire
api1-1  |     await AsyncIOBackend.cancel_shielded_checkpoint()
api1-1  |   File "/usr/local/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 2350, in cancel_shielded_checkpoint
api1-1  |     await sleep(0)
api1-1  |   File "/usr/local/lib/python3.13/asyncio/tasks.py", line 706, in sleep
api1-1  |     await __sleep0()
api1-1  |   File "/usr/local/lib/python3.13/asyncio/tasks.py", line 700, in __sleep0
api1-1  |     yield
api1-1  | asyncio.exceptions.CancelledError
[Kapi2-1 exited with code 0
log truncated at line 1000
