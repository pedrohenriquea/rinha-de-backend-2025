
 api1 Pulling 
 api2 Pulling 
 9824c27679d3 Already exists 
 a4d3ab5050f8 Pulling fs layer 
 d1ab765ab1ff Pulling fs layer 
 b2018efee48b Pulling fs layer 
 e2ce7f2d9ce5 Pulling fs layer 
 e2ce7f2d9ce5 Waiting 
 9824c27679d3 Already exists 
 a4d3ab5050f8 Pulling fs layer 
 d1ab765ab1ff Pulling fs layer 
 b2018efee48b Pulling fs layer 
 e2ce7f2d9ce5 Pulling fs layer 
 e2ce7f2d9ce5 Waiting 
 b2018efee48b Downloading [==================================================>]      92B/92B
 b2018efee48b Verifying Checksum 
 b2018efee48b Download complete 
 b2018efee48b Downloading [==================================================>]      92B/92B
 b2018efee48b Verifying Checksum 
 b2018efee48b Download complete 
 d1ab765ab1ff Verifying Checksum 
 d1ab765ab1ff Download complete 
 d1ab765ab1ff Downloading [==================================================>]     945B/945B
 d1ab765ab1ff Verifying Checksum 
 d1ab765ab1ff Download complete 
 a4d3ab5050f8 Downloading [>                                                  ]  16.38kB/1.064MB
 a4d3ab5050f8 Downloading [>                                                  ]  16.38kB/1.064MB
 a4d3ab5050f8 Download complete 
 a4d3ab5050f8 Extracting [=>                                                 ]  32.77kB/1.064MB
 a4d3ab5050f8 Downloading [==================================================>]  1.064MB/1.064MB
 a4d3ab5050f8 Verifying Checksum 
 a4d3ab5050f8 Download complete 
 a4d3ab5050f8 Extracting [=>                                                 ]  32.77kB/1.064MB
 a4d3ab5050f8 Extracting [==================================================>]  1.064MB/1.064MB
 a4d3ab5050f8 Extracting [==================================================>]  1.064MB/1.064MB
 a4d3ab5050f8 Extracting [==================================================>]  1.064MB/1.064MB
 a4d3ab5050f8 Extracting [==================================================>]  1.064MB/1.064MB
 a4d3ab5050f8 Pull complete 
 a4d3ab5050f8 Pull complete 
 d1ab765ab1ff Extracting [==================================================>]     945B/945B
 d1ab765ab1ff Extracting [==================================================>]     945B/945B
 d1ab765ab1ff Extracting [==================================================>]     945B/945B
 d1ab765ab1ff Extracting [==================================================>]     945B/945B
 d1ab765ab1ff Pull complete 
 d1ab765ab1ff Pull complete 
 b2018efee48b Extracting [==================================================>]      92B/92B
 b2018efee48b Extracting [==================================================>]      92B/92B
 b2018efee48b Extracting [==================================================>]      92B/92B
 b2018efee48b Extracting [==================================================>]      92B/92B
 e2ce7f2d9ce5 Downloading [>                                                  ]  259.6kB/24.49MB
 e2ce7f2d9ce5 Downloading [>                                                  ]  259.6kB/24.49MB
 b2018efee48b Pull complete 
 b2018efee48b Pull complete 
 e2ce7f2d9ce5 Downloading [====================================>              ]  17.82MB/24.49MB
 e2ce7f2d9ce5 Downloading [====================================>              ]  17.82MB/24.49MB
 e2ce7f2d9ce5 Verifying Checksum 
 e2ce7f2d9ce5 Download complete 
 e2ce7f2d9ce5 Verifying Checksum 
 e2ce7f2d9ce5 Download complete 
 e2ce7f2d9ce5 Extracting [>                                                  ]  262.1kB/24.49MB
 e2ce7f2d9ce5 Extracting [>                                                  ]  262.1kB/24.49MB
 e2ce7f2d9ce5 Extracting [=================>                                 ]  8.651MB/24.49MB
 e2ce7f2d9ce5 Extracting [=================>                                 ]  8.651MB/24.49MB
 e2ce7f2d9ce5 Extracting [==========================================>        ]  20.71MB/24.49MB
 e2ce7f2d9ce5 Extracting [==========================================>        ]  20.71MB/24.49MB
 e2ce7f2d9ce5 Extracting [=================================================> ]  24.38MB/24.49MB
 e2ce7f2d9ce5 Extracting [=================================================> ]  24.38MB/24.49MB
 e2ce7f2d9ce5 Extracting [==================================================>]  24.49MB/24.49MB
 e2ce7f2d9ce5 Extracting [==================================================>]  24.49MB/24.49MB
 e2ce7f2d9ce5 Pull complete 
 e2ce7f2d9ce5 Pull complete 
 api2 Pulled 
 api1 Pulled 
 Network dnery_backend  Creating
 Network dnery_backend  Created
 Container dnery-api1-1  Creating
 Container dnery-api2-1  Creating
 Container dnery-postgres-1  Creating
 Container dnery-api1-1  Created
 Container dnery-postgres-1  Created
 Container dnery-api2-1  Created
 Container dnery-nginx-1  Creating
 Container dnery-nginx-1  Created
Attaching to api1-1, api2-1, nginx-1, postgres-1
api1-1  | info: Microsoft.Hosting.Lifetime[14]
api1-1  |       Now listening on: http://[::]:8080
api1-1  | info: Microsoft.Hosting.Lifetime[0]
api1-1  |       Application started. Press Ctrl+C to shut down.
api1-1  | info: Microsoft.Hosting.Lifetime[0]
api1-1  |       Hosting environment: Production
api1-1  | info: Microsoft.Hosting.Lifetime[0]
api1-1  |       Content root path: /app
api2-1  | info: Microsoft.Hosting.Lifetime[14]
api2-1  |       Now listening on: http://[::]:8080
api2-1  | info: Microsoft.Hosting.Lifetime[0]
api2-1  |       Application started. Press Ctrl+C to shut down.
api2-1  | info: Microsoft.Hosting.Lifetime[0]
api2-1  |       Hosting environment: Production
api2-1  | info: Microsoft.Hosting.Lifetime[0]
api2-1  |       Content root path: /app
postgres-1  | The files belonging to this database system will be owned by user "postgres".
postgres-1  | This user must also own the server process.
postgres-1  | 
postgres-1  | The database cluster will be initialized with locale "en_US.utf8".
postgres-1  | The default database encoding has accordingly been set to "UTF8".
postgres-1  | The default text search configuration will be set to "english".
postgres-1  | 
postgres-1  | Data page checksums are disabled.
postgres-1  | 
postgres-1  | fixing permissions on existing directory /var/lib/postgresql/data ... ok
postgres-1  | creating subdirectories ... ok
postgres-1  | selecting dynamic shared memory implementation ... posix
postgres-1  | selecting default "max_connections" ... 100
nginx-1     | /docker-entrypoint.sh: /docker-entrypoint.d/ is not empty, will attempt to perform configuration
nginx-1     | /docker-entrypoint.sh: Looking for shell scripts in /docker-entrypoint.d/
nginx-1     | /docker-entrypoint.sh: Launching /docker-entrypoint.d/10-listen-on-ipv6-by-default.sh
nginx-1     | 10-listen-on-ipv6-by-default.sh: info: Getting the checksum of /etc/nginx/conf.d/default.conf
postgres-1  | selecting default "shared_buffers" ... 128MB
nginx-1     | 10-listen-on-ipv6-by-default.sh: info: Enabled listen on IPv6 in /etc/nginx/conf.d/default.conf
nginx-1     | /docker-entrypoint.sh: Sourcing /docker-entrypoint.d/15-local-resolvers.envsh
nginx-1     | /docker-entrypoint.sh: Launching /docker-entrypoint.d/20-envsubst-on-templates.sh
nginx-1     | /docker-entrypoint.sh: Launching /docker-entrypoint.d/30-tune-worker-processes.sh
nginx-1     | /docker-entrypoint.sh: Configuration complete; ready for start up
postgres-1  | selecting default time zone ... UTC
postgres-1  | creating configuration files ... ok
postgres-1  | running bootstrap script ... ok
postgres-1  | sh: locale: not found
postgres-1  | 2025-08-12 20:41:55.096 UTC [36] WARNING:  no usable system locales were found
api1-1      | fail: Microsoft.AspNetCore.Server.Kestrel[13]
api1-1      |       Connection id "0HNEPS2MID85S", Request id "0HNEPS2MID85S:00000001": An unhandled exception was thrown by the application.
api1-1      |       Npgsql.NpgsqlException (0x80004005): Failed to connect to 172.20.0.4:5432
api1-1      |        ---> System.Net.Sockets.SocketException (111): Connection refused
api1-1      |          at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.ThrowException(SocketError, CancellationToken) + 0x48
api1-1      |          at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.System.Threading.Tasks.Sources.IValueTaskSource.GetResult(Int16) + 0x53
api1-1      |          at System.Net.Sockets.Socket.<<ConnectAsync>g__WaitForConnectWithCancellation|289_0>d.MoveNext() + 0x1b7
api1-1      |       --- End of stack trace from previous location ---
api1-1      |          at Npgsql.TaskTimeoutAndCancellation.<ExecuteAsync>d__1.MoveNext() + 0x2ae
api1-1      |       --- End of stack trace from previous location ---
api1-1      |          at Npgsql.Internal.NpgsqlConnector.<ConnectAsync>d__222.MoveNext() + 0x3cb
api1-1      |          at Npgsql.Internal.NpgsqlConnector.<ConnectAsync>d__222.MoveNext() + 0x6ee
api1-1      |       --- End of stack trace from previous location ---
api1-1      |          at Npgsql.Internal.NpgsqlConnector.<RawOpen>d__218.MoveNext() + 0xc18
api1-1      |       --- End of stack trace from previous location ---
api1-1      |          at Npgsql.Internal.NpgsqlConnector.<<Open>g__OpenCore|214_1>d.MoveNext() + 0x237
api1-1      |       --- End of stack trace from previous location ---
api1-1      |          at Npgsql.Internal.NpgsqlConnector.<Open>d__214.MoveNext() + 0x69f
api1-1      |       --- End of stack trace from previous location ---
api1-1      |          at Npgsql.PoolingDataSource.<OpenNewConnector>d__36.MoveNext() + 0x56e
api1-1      |       --- End of stack trace from previous location ---
api1-1      |          at Npgsql.PoolingDataSource.<<Get>g__RentAsync|33_0>d.MoveNext() + 0x1d7
api1-1      |       --- End of stack trace from previous location ---
api1-1      |          at Npgsql.NpgsqlConnection.<<Open>g__OpenAsync|42_0>d.MoveNext() + 0x3cc
api1-1      |       --- End of stack trace from previous location ---
api1-1      |          at rinha.SummaryService.<GetPaymentSummary>d__3.MoveNext() + 0x173
api1-1      |       --- End of stack trace from previous location ---
api1-1      |          at rinha.SummaryService.<GetPaymentSummary>d__3.MoveNext() + 0x5f4
api1-1      |       --- End of stack trace from previous location ---
api1-1      |          at Program.<>c.<<<Main>$>b__0_2>d.MoveNext() + 0x4f
api1-1      |       --- End of stack trace from previous location ---
api1-1      |          at Microsoft.AspNetCore.Http.Generated.<GeneratedRouteBuilderExtensions_g>FA7B584A6F0C82DB4D2C9FB1C8BCE41AA95A2F2C5043CCC15C209E8BD6989714B__GeneratedRouteBuilderExtensionsCore.<>c__DisplayClass4_0.<<MapGet1>g__RequestHandler|5>d.MoveNext() + 0x91
api1-1      |       --- End of stack trace from previous location ---
api1-1      |          at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.<ProcessRequests>d__237`1.MoveNext() + 0x3e7
postgres-1  | performing post-bootstrap initialization ... ok
postgres-1  | syncing data to disk ... ok
postgres-1  | 
postgres-1  | 
postgres-1  | Success. You can now start the database server using:
postgres-1  | 
postgres-1  |     pg_ctl -D /var/lib/postgresql/data -l logfile start
postgres-1  | 
postgres-1  | initdb: warning: enabling "trust" authentication for local connections
postgres-1  | initdb: hint: You can change this by editing pg_hba.conf or using the option -A, or --auth-local and --auth-host, the next time you run initdb.
postgres-1  | waiting for server to start....2025-08-12 20:41:58.802 UTC [42] LOG:  starting PostgreSQL 17.5 on x86_64-pc-linux-musl, compiled by gcc (Alpine 14.2.0) 14.2.0, 64-bit
postgres-1  | 2025-08-12 20:41:58.802 UTC [42] LOG:  listening on Unix socket "/var/run/postgresql/.s.PGSQL.5432"
postgres-1  | 2025-08-12 20:41:58.805 UTC [45] LOG:  database system was shut down at 2025-08-12 20:41:58 UTC
postgres-1  | 2025-08-12 20:41:58.809 UTC [42] LOG:  database system is ready to accept connections
postgres-1  |  done
postgres-1  | server started
postgres-1  | CREATE DATABASE
postgres-1  | 
postgres-1  | 
postgres-1  | /usr/local/bin/docker-entrypoint.sh: running /docker-entrypoint-initdb.d/init.sql
postgres-1  | DROP TABLE
postgres-1  | psql:/docker-entrypoint-initdb.d/init.sql:1: NOTICE:  table "payments" does not exist, skipping
postgres-1  | CREATE TABLE
postgres-1  | CREATE INDEX
postgres-1  | 
postgres-1  | 
postgres-1  | waiting for server to shut down...2025-08-12 20:41:59.304 UTC [42] LOG:  received fast shutdown request
postgres-1  | 2025-08-12 20:41:59.304 UTC [42] LOG:  aborting any active transactions
postgres-1  | .2025-08-12 20:41:59.394 UTC [42] LOG:  background worker "logical replication launcher" (PID 48) exited with exit code 1
postgres-1  | 2025-08-12 20:41:59.394 UTC [43] LOG:  shutting down
postgres-1  | 2025-08-12 20:41:59.394 UTC [43] LOG:  checkpoint starting: shutdown immediate
postgres-1  | 2025-08-12 20:41:59.404 UTC [43] LOG:  checkpoint complete: wrote 927 buffers (5.7%); 0 WAL file(s) added, 0 removed, 0 recycled; write=0.010 s, sync=0.001 s, total=0.011 s; sync files=0, longest=0.000 s, average=0.000 s; distance=4276 kB, estimate=4276 kB; lsn=0/191A368, redo lsn=0/191A368
postgres-1  | 2025-08-12 20:41:59.416 UTC [42] LOG:  database system is shut down
postgres-1  |  done
postgres-1  | server stopped
postgres-1  | 
postgres-1  | PostgreSQL init process complete; ready for start up.
postgres-1  | 
postgres-1  | 2025-08-12 20:41:59.597 UTC [1] LOG:  starting PostgreSQL 17.5 on x86_64-pc-linux-musl, compiled by gcc (Alpine 14.2.0) 14.2.0, 64-bit
postgres-1  | 2025-08-12 20:41:59.597 UTC [1] LOG:  listening on IPv4 address "0.0.0.0", port 5432
postgres-1  | 2025-08-12 20:41:59.597 UTC [1] LOG:  listening on IPv6 address "::", port 5432
postgres-1  | 2025-08-12 20:41:59.598 UTC [1] LOG:  listening on Unix socket "/var/run/postgresql/.s.PGSQL.5432"
postgres-1  | 2025-08-12 20:41:59.600 UTC [60] LOG:  database system was shut down at 2025-08-12 20:41:59 UTC
postgres-1  | 2025-08-12 20:41:59.605 UTC [1] LOG:  database system is ready to accept connections
postgres-1  | 2025-08-12 20:43:07.664 UTC [1] LOG:  received fast shutdown request
postgres-1  | 2025-08-12 20:43:07.664 UTC [1] LOG:  aborting any active transactions
postgres-1  | 2025-08-12 20:43:07.669 UTC [67] FATAL:  terminating connection due to administrator command
postgres-1  | 2025-08-12 20:43:07.669 UTC [69] FATAL:  terminating connection due to administrator command
postgres-1  | 2025-08-12 20:43:07.669 UTC [64] FATAL:  terminating connection due to administrator command
postgres-1  | 2025-08-12 20:43:07.673 UTC [65] FATAL:  terminating connection due to administrator command
postgres-1  | 2025-08-12 20:43:07.675 UTC [1] LOG:  background worker "logical replication launcher" (PID 63) exited with exit code 1
postgres-1  | 2025-08-12 20:43:07.694 UTC [58] LOG:  shutting down
postgres-1  | 2025-08-12 20:43:07.694 UTC [58] LOG:  checkpoint starting: shutdown immediate
postgres-1  | 2025-08-12 20:43:07.697 UTC [58] LOG:  checkpoint complete: wrote 319 buffers (1.9%); 0 WAL file(s) added, 0 removed, 0 recycled; write=0.003 s, sync=0.001 s, total=0.003 s; sync files=0, longest=0.000 s, average=0.000 s; distance=152 kB, estimate=152 kB; lsn=0/1940608, redo lsn=0/1940608
postgres-1  | 2025-08-12 20:43:07.710 UTC [1] LOG:  database system is shut down
[Knginx-1 exited with code 0
api2-1      | info: Microsoft.Hosting.Lifetime[0]
api2-1      |       Application is shutting down...
api1-1      | info: Microsoft.Hosting.Lifetime[0]
api1-1      |       Application is shutting down...
api1-1      | System.Threading.Tasks.TaskCanceledException: A task was canceled.
api1-1      |    at rinha.PaymentHandler.<AddToDb>d__2.MoveNext() + 0x143
api1-1      | System.Threading.Tasks.TaskCanceledException: A task was canceled.
api1-1      |    at rinha.PaymentHandler.<Process>d__1.MoveNext() + 0x81
api1-1      | System.Threading.Tasks.TaskCanceledException: A task was canceled.
api1-1      |    at rinha.PaymentHandler.<Process>d__1.MoveNext() + 0x81
api1-1      | System.Threading.Tasks.TaskCanceledException: A task was canceled.
api1-1      |    at rinha.PaymentHandler.<Process>d__1.MoveNext() + 0x81
api2-1      | System.Threading.Tasks.TaskCanceledException: A task was canceled.
api2-1      |    at rinha.PaymentHandler.<AddToDb>d__2.MoveNext() + 0x143
api2-1      | System.Threading.Tasks.TaskCanceledException: A task was canceled.
api2-1      |    at rinha.PaymentHandler.<Process>d__1.MoveNext() + 0x81
api2-1      | System.Threading.Tasks.TaskCanceledException: A task was canceled.
api2-1      |    at rinha.PaymentHandler.<Process>d__1.MoveNext() + 0x81
api2-1      | System.Threading.Tasks.TaskCanceledException: A task was canceled.
api2-1      |    at rinha.PaymentHandler.<Process>d__1.MoveNext() + 0x81
[Kpostgres-1 exited with code 0
[Kapi1-1 exited with code 0
log truncated at line 1000
