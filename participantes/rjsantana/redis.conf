tcp-backlog 8192
maxclients 20000
timeout 300
tcp-keepalive 300
io-threads 4
io-threads-do-reads yes
appendonly yes
appendfsync everysec
loglevel notice


# # RINHA BACKEND 2025 - Redis Configuration for High Performance
# # ================================================================

# # Network Configuration
# bind 0.0.0.0
# port 6379
# tcp-backlog 8192
# timeout 30
# tcp-keepalive 60

# # Performance Optimization
# maxclients 10000
# maxmemory 18mb
# maxmemory-policy allkeys-lru

# # I/O Threads (Redis 6+) - Ajustado para container limitado
# io-threads 2
# io-threads-do-reads yes

# # Memory Management - Otimizado para evitar warnings de overcommit
# lazyfree-lazy-eviction yes
# lazyfree-lazy-expire yes
# lazyfree-lazy-server-del yes
# replica-lazy-flush yes

# # Background Operations
# hz 10
# dynamic-hz yes

# # Persistence (Disabled for Performance)
# save ""
# appendonly no
# stop-writes-on-bgsave-error no

# # Logging - Reduzido para performance
# loglevel warning
# syslog-enabled no

# # Security
# protected-mode no

# # Advanced Optimizations
# hash-max-ziplist-entries 512
# hash-max-ziplist-value 64
# list-max-ziplist-size -2
# list-compress-depth 0
# set-max-intset-entries 512
# zset-max-ziplist-entries 128
# zset-max-ziplist-value 64
# stream-node-max-bytes 4kb
# stream-node-max-entries 100

# # Memory Allocation - Otimizado para containers
# allocator-frag-below-frag-threshold 1.0
# active-rehashing yes
# client-output-buffer-limit normal 0 0 0
# client-output-buffer-limit replica 0 0 0
# client-output-buffer-limit pubsub 0 0 0

# # Disable potentially memory-intensive features
# rdbcompression no
# rdbchecksum no